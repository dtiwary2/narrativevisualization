<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> circle {fill: lightblue; stroke: black;} </style>
<body onload='init()'>
<svg width=600 height=600>
</svg>
<script>
async function init() {
const data=await d3.csv("https://flunky.github.io/cars2017.csv");

var x = d3.scaleLog().domain([10,150]).range([0,500]).base(10)
var y = d3.scaleLog().domain([10,150]).range([500,0]).base(10)

d3.select("svg")
.attr("width", 500+6*50)
.attr("height", 500+3*50)
.append("g")
.attr("transform","translate("+250+","+20+")")
.selectAll("circle").data(data)
.enter().append("circle")
.filter(function(d) { return d.Fuel == "Gasoline" })
.style("fill", "none")
.style("stroke","blue")
.style("stroke-width","2")
.attr("cx",function(d,i) { return x(d.AverageCityMPG) })
.attr("cy",function(d) { return 500-x( Number(d.AverageHighwayMPG)); })
.attr("r", function(d) { return 5+ Number(d.EngineCylinders) });

d3.select("svg")
.append("g")
.attr("transform","translate("+250+","+20+")")
.call(d3.axisLeft(y).tickValues([10,20,50,100]).tickFormat(d3.format("~s")));

d3.select("svg")
.append("g")
.attr("transform","translate("+250+","+520+")")
.call(d3.axisBottom(x).tickValues([10,20,50,100]).tickFormat(d3.format("~s")))

d3.select("svg").html=""

d3.select("svg")
.attr("width", 500+6*50)
.attr("height", 500+3*50)
.append("g")
.attr("transform","translate("+250+","+20+")")
.selectAll("circle").data(data)
.enter().append("circle")
.filter(function(d) { return d.Fuel == "Diesel" })
.style("fill", "none")
.style("stroke","yello")
.style("stroke-width","2")
.attr("cx",function(d,i) { return x(d.AverageCityMPG) })
.attr("cy",function(d) { return 500-x( Number(d.AverageHighwayMPG)); })
.attr("r", function(d) { return 5+ Number(d.EngineCylinders) });

/*
d3.select("svg")
.attr("width", 200+2*500)
.attr("height", 200+2*500)
.append("g")
.attr("transform","translate("+500+","+50+")")
.selectAll("circle").data(data)
.enter().append("circle")
.filter(function(d) { return d.Fuel == "Diesel" })
.style("fill", "none")
.style("stroke","yellow")
.style("stroke-width","2")
.attr("cx",function(d,i) { return x(d.AverageCityMPG) })
.attr("cy",function(d) { return 200-x( Number(d.AverageHighwayMPG)); })
.attr("r", function(d) { return 2+ Number(d.EngineCylinders) });

d3.select("svg")
.append("g")
.attr("transform","translate("+500+","+50+")")
.call(d3.axisLeft(y).tickValues([10,20,50,100]).tickFormat(d3.format("~s")));

d3.select("svg")
.append("g")
.attr("transform","translate("+500+","+250+")")
.call(d3.axisBottom(x).tickValues([10,20,50,100]).tickFormat(d3.format("~s")))


d3.select("svg")
.attr("width", 200+2*500)
.attr("height", 200+2*500)
.append("g")
.attr("transform","translate("+50+","+500+")")
.selectAll("circle").data(data)
.enter().append("circle")
.filter(function(d) { return d.Fuel == "Electricity" })
.style("fill", "none")
.style("stroke","green")
.style("stroke-width","2")
.attr("cx",function(d,i) { return x(d.AverageCityMPG) })
.attr("cy",function(d) { return 200-x( Number(d.AverageHighwayMPG)); })
.attr("r", function(d) { return 2+ Number(d.EngineCylinders) });

d3.select("svg")
.append("g")
.attr("transform","translate("+50+","+500+")")
.call(d3.axisLeft(y).tickValues([10,20,50,100]).tickFormat(d3.format("~s")));

d3.select("svg")
.append("g")
.attr("transform","translate("+50+","+700+")")
.call(d3.axisBottom(x).tickValues([10,20,50,100]).tickFormat(d3.format("~s")));
*/

}

</script>

<div>
<form action="https://google.com">
    <input type="submit" value="Go to Google" />
</form>
</div>
</body>
</html>

